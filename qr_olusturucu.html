<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restoran QR MenÃ¼ - Masa KodlarÄ±</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            text-align: center; 
            background: #f4f4f9; 
            margin: 0; 
            padding: 20px; 
        }

        /* Kontrol Paneli (YazdÄ±rÄ±rken gizlenecek) */
        .controls { 
            background: white; 
            padding: 25px; 
            margin-bottom: 30px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
            border-radius: 12px; 
            max-width: 600px; 
            margin-left: auto; 
            margin-right: auto; 
        }

        h2 { margin-top: 0; color: #333; }

        input { 
            padding: 12px; 
            border: 1px solid #ddd; 
            border-radius: 6px; 
            margin: 5px; 
            font-size: 1rem; 
        }
        
        #siteUrl { width: 300px; }
        #masaSayisi { width: 80px; }

        button { 
            padding: 12px 24px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 1rem; 
            transition: background 0.2s; 
            margin: 5px; 
        }

        .btn-olustur { background: #3498db; color: white; }
        .btn-olustur:hover { background: #2980b9; }

        .btn-yazdir { background: #2c3e50; color: white; }
        .btn-yazdir:hover { background: #1a252f; }

        /* QR KartlarÄ± IzgarasÄ± */
        #qr-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .masa-karti {
            background: white;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #eee;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            page-break-inside: avoid; /* YazÄ±cÄ±da kartÄ±n ortadan bÃ¶lÃ¼nmesini engeller */
        }
        
        .masa-no { 
            font-size: 1.4rem; 
            font-weight: 800; 
            margin-bottom: 15px; 
            color: #333; 
            text-transform: uppercase; 
        }
        
        .qr-code { margin-bottom: 10px; }
        
        .alt-bilgi { 
            color: #666; 
            font-size: 0.85rem; 
            margin-top: 5px; 
            font-weight: 500; 
        }

        /* YAZDIRMA MODU AYARLARI */
        @media print {
            body { background: white; padding: 0; }
            .controls { display: none !important; } /* Paneli gizle */
            #qr-container { 
                display: grid; 
                grid-template-columns: repeat(3, 1fr); /* KaÄŸÄ±da yan yana 3 tane sÄ±ÄŸdÄ±r */
                gap: 20px; 
                width: 100%;
            }
            .masa-karti { 
                border: 1px solid #ccc; 
                box-shadow: none; 
                margin-bottom: 20px; 
            }
        }
    </style>
</head>
<body>

    <div class="controls">
        <h2>ğŸ–¨ï¸ QR MenÃ¼ OluÅŸturucu</h2>
        <p style="color:#666; font-size:0.9rem; margin-bottom:15px;">MÃ¼ÅŸteri menÃ¼sÃ¼ linkini yapÄ±ÅŸtÄ±rÄ±n, masa sayÄ±sÄ±nÄ± girin ve yazdÄ±rÄ±n.</p>
        
        <input type="text" id="siteUrl" placeholder="https://restoran-menusu.vercel.app" />
        <input type="number" id="masaSayisi" placeholder="Adet" value="10" />
        <br>
        <button class="btn-olustur" onclick="qrOlustur()">QR KodlarÄ± OluÅŸtur</button>
        <button class="btn-yazdir" onclick="window.print()">ğŸ–¨ï¸ YazdÄ±r / PDF Kaydet</button>
    </div>

    <div id="qr-container"></div>

    <script>
        function qrOlustur() {
            const container = document.getElementById('qr-container');
            let url = document.getElementById('siteUrl').value.trim();
            const sayi = document.getElementById('masaSayisi').value;

            if (!url) { alert("LÃ¼tfen Vercel mÃ¼ÅŸteri linkini yapÄ±ÅŸtÄ±rÄ±n!"); return; }
            
            // Linkin sonunda / var mÄ± yok mu kontrol et, yoksa ekle
            if (url.endsWith('/')) {
                url = url.slice(0, -1); // Varsa sil, biz aÅŸaÄŸÄ±da temiz ekleyeceÄŸiz
            }

            container.innerHTML = ""; // Ã–nceki QR'larÄ± temizle

            for (let i = 1; i <= sayi; i++) {
                const div = document.createElement('div');
                div.className = 'masa-karti';
                
                // URL OLUÅTURMA MANTIÄI: site.com/?masa=1
                const fullUrl = `${url}/?masa=${i}`;

                // KartÄ±n HTML iÃ§eriÄŸi
                div.innerHTML = `
                    <div class="masa-no">Masa ${i}</div>
                    <div id="qr-${i}" class="qr-code"></div>
                    <div class="alt-bilgi">MenÃ¼ iÃ§in okutunuz</div>
                `;
                
                container.appendChild(div);

                // QR Kodunu Ã§iz (qrcode.js kÃ¼tÃ¼phanesi)
                new QRCode(document.getElementById(`qr-${i}`), {
                    text: fullUrl,
                    width: 150,
                    height: 150,
                    colorDark : "#000000",
                    colorLight : "#ffffff",
                    correctLevel : QRCode.CorrectLevel.H
                });
            }
        }
    </script>
</body>
</html>